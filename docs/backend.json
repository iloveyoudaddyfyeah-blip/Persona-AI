
{
  "entities": {
    "CharacterProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CharacterProfile",
      "type": "object",
      "description": "Represents a character profile generated and/or customized by the user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the CharacterProfile entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the character."
        },
        "photoDataUri": {
          "type": "string",
          "description": "Data URI of the uploaded photo used to generate the profile.",
          "format": "uri"
        },
        "profile": {
          "type": "string",
          "description": "The formatted, combined personality profile text."
        },
        "profileData": {
          "type": "object",
          "description": "The structured, AI-generated personality profile data.",
          "properties": {
            "biography": {"type": "string"},
            "traits": {"type": "string"},
            "hobbies": {"type": "string"},
            "motivations": {"type": "string"},
            "likes": {"type": "array", "items": {"type": "string"}},
            "dislikes": {"type": "array", "items": {"type": "string"}}
          }
        },
        "chatHistory": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "role": {"type": "string", "enum": ["user", "character"]},
                    "content": {"type": "string"}
                }
            }
        }
      },
      "required": [
        "id",
        "name",
        "photoDataUri",
        "profile"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the application. This document stores user-specific data like settings.",
      "properties": {
        "settings": {
          "type": "object",
          "description": "User-specific application settings.",
          "properties": {
            "theme": {
              "type": "string",
              "enum": [
                "light",
                "dark"
              ],
              "description": "The UI theme preference."
            },
            "aiTone": {
              "type": "string",
              "description": "The default tone for AI generation."
            },
            "aiCharLimit": {
              "type": "number",
              "description": "The default character limit for AI-generated biographies."
            }
          }
        },
        "activePersonaId": {
          "type": "string",
          "description": "The ID of the currently active UserPersona."
        }
      }
    },
    "UserPersona": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserPersona",
      "type": "object",
      "description": "Represents a single user-created persona for interacting with AI characters.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the UserPersona."
        },
        "name": {
          "type": "string",
          "description": "The name of the persona."
        },
        "description": {
          "type": "string",
          "description": "The AI-generated or user-written description of the persona."
        },
        "photoDataUri": {
          "type": "string",
          "description": "Data URI of the uploaded photo for the persona.",
          "format": "uri"
        },
        "isActive": {
          "type": "boolean",
          "description": "Whether this is the currently active persona for the user."
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "photoDataUri",
        "isActive"
      ]
    }
  },
  "auth": {
    "providers": [
      "anonymous",
      "password"
    ]
  },
  "firestore": {
    "/users/{userId}": {
        "schema": { "$ref": "#/entities/User" },
        "description": "Stores user profiles, including settings and active persona ID."
    },
    "/users/{userId}/characters/{characterId}": {
        "schema": { "$ref": "#/entities/CharacterProfile" },
        "description": "Stores character profiles created by the user."
    },
    "/users/{userId}/personas/{personaId}": {
      "schema": { "$ref": "#/entities/UserPersona" },
      "description": "Stores the different personas created by a user."
    }
  }
}
